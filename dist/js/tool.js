(()=>{"use strict";var e,t={173:(e,t,n)=>{const o=Vue;const r="--vc-auto-duration",a=`height var(${r}) cubic-bezier(0.33, 1, 0.68, 1)`,l={padding:0},i={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function u(e){return e.value?parseFloat(getComputedStyle(e.value).height):0}function s(e){var t;return{height:`${(null==(t=e.value)?void 0:t.scrollHeight)??0}px`}}function c(e){if(!e.value)return{};const{transition:t}=getComputedStyle(e.value);return"all 0s ease 0s"===t?{transition:a}:{transition:t}}function d(e){if(!e.value)return!0;const{transition:t}=getComputedStyle(e.value);return matchMedia("(prefers-reduced-motion: reduce)").matches||t.includes("none")||t.includes("height 0s")}const p=(0,o.defineComponent)({inheritAttrs:!0,__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(e,{emit:t}){const n=e,a=(0,o.toRef)(n,"when"),p=(0,o.toRef)(n,"baseHeight"),f=(0,o.computed)((()=>({overflow:"hidden",height:`${p.value}px`}))),v=(0,o.computed)((()=>({...l,...0===p.value?{display:"none"}:f.value}))),h=(0,o.ref)(null),m=(0,o.ref)(a.value?"expanded":"collapsed"),g=e=>m.value=e,b=(0,o.shallowRef)({}),y=e=>b.value=e,w=e=>y({...b.value,...e}),x=(0,o.ref)(300),C=(0,o.computed)((()=>({[r]:`${x.value}ms`})));function k(){y(l),g("expanded"),t("expanded")}function _(){y(v.value),g("collapsed"),t("collapsed")}function R(e){var t;e.target===h.value&&"height"===e.propertyName&&(a.value?(null==(t=h.value)?void 0:t.scrollHeight)===u(h)&&k():p.value===u(h)&&_())}return(0,o.onMounted)((()=>{if(!h.value)return;a.value||0!==p.value||y(i);const e=function(e=0){if(0===e)return 0;const t=e/36,n=Math.round(10*(4+15*t**.25+t/5));return Number.isFinite(n)?n:0}(h.value.scrollHeight-p.value);var t;t=e<=0?300:e,x.value=t,y(a.value?l:v.value)})),(0,o.watch)(a,(e=>{if(e){if(d(h))return k();g("expanding"),t("expand"),y({...l,...f.value,...C.value}),requestAnimationFrame((()=>{w({...s(h),...c(h),willChange:"height"})}))}else{if(d(h))return _();g("collapsing"),t("collapse"),w({...C.value,...s(h)}),requestAnimationFrame((()=>{w({...f.value,...c(h),willChange:"height"})}))}})),(0,o.watch)(p,(e=>{a.value||w(e>0?{display:void 0,height:`${e}px`}:{display:"none"})})),(e,t)=>((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(n.as),{ref_key:"collapseRef",ref:h,style:(0,o.normalizeStyle)(b.value),onTransitionend:R,"data-collapse":m.value},{default:(0,o.withCtx)((()=>[(0,o.renderSlot)(e.$slots,"default",(0,o.normalizeProps)((0,o.guardReactiveProps)({state:m.value})))])),_:3},40,["style","data-collapse"]))}});var f=["colspan"];const v={props:["collapsed","span"]};var h=n(744);function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw a}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const b={components:{Column:(0,h.Z)(v,[["render",function(e,t,n,r,a,l){return(0,o.openBlock)(),(0,o.createElementBlock)("td",{colspan:n.span,class:(0,o.normalizeClass)([{"dark:border-gray-700 dark:bg-gray-800":n.collapsed,"border-t border-gray-600 bg-gray-50 dark:bg-[rgba(var(--colors-gray-900),var(--tw-bg-opacity))]":!n.collapsed},"px-2 whitespace-nowrap group-hover:bg-gray-50 dark:group-hover:bg-gray-900 border-t-gray-200 dark:border-t-gray-700 transition-all duration-100 bg-opacity-30"])},[(0,o.renderSlot)(e.$slots,"default")],10,f)}]]),Collapse:p},props:["row"],data:function(){return{collapsed:!this.row.resource.fields.find((function(e){var t=e.expandableRowOptions;return!0===(null==t?void 0:t.expanded_by_default)}))}},created:function(){Nova.$on("collapse-toggle:".concat(this.row.resource.id.value),this.toggle)},unmounted:function(){Nova.$off("collapse-toggle:".concat(this.row.resource.id.value),this.toggle)},computed:{fields:function(){var e,t=[],n=this.row.resource.fields.length,o=0,r=0,a=m(this.row.resource.fields);try{for(a.s();!(e=a.n()).done;){var l,i=e.value;if(o)o--;else{var u=(null===(l=i.expandableRowOptions)||void 0===l?void 0:l.span)||0;u&&(o=u-1),t.push(i),r+=u}}}catch(e){a.e(e)}finally{a.f()}return r<n&&t.push({span:0}),t},hasTableRowData:function(){return!!this.row.resource.fields.find((function(e){return void 0!==e.expandableRowData}))}},methods:{toggle:function(){this.collapsed=!this.collapsed}}},y=(0,h.Z)(b,[["render",function(e,t,n,r,a,l){var i=(0,o.resolveComponent)("Column"),u=(0,o.resolveComponent)("Collapse");return l.hasTableRowData?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createVNode)(i,{collapsed:a.collapsed},null,8,["collapsed"]),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.fields,(function(e){var t,n=e.expandableRowData,r=e.expandableRowOptions;return(0,o.openBlock)(),(0,o.createBlock)(i,{collapsed:a.collapsed,span:null!==(t=null==r?void 0:r.span)&&void 0!==t?t:0},{default:(0,o.withCtx)((function(){return[null!=r&&r.preallocate_column_width?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)("index-"+n.component),{key:0,class:"h-0 invisible",field:n},null,8,["field"])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(u,{when:!a.collapsed},{default:(0,o.withCtx)((function(){return[n?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)("index-"+n.component),{key:0,class:(0,o.normalizeClass)(["py-2","text-".concat(n.textAlign)]),field:n},null,8,["class","field"])):(0,o.createCommentVNode)("",!0)]})),_:2},1032,["when"])]})),_:2},1032,["collapsed","span"])})),256))],64)):(0,o.createCommentVNode)("",!0)}]]);const w={props:["row"],data:function(){return{collapsed:!0,Nova}},methods:{toggleState:function(){Nova.$emit("collapse-toggle:".concat(this.row.resource.id.value)),this.collapsed=!this.collapsed}},computed:{hasTableRowData:function(){return!!this.row.resource.fields.find((function(e){return void 0!==e.expandableRowData}))}}},x=(0,h.Z)(w,[["render",function(e,t,n,r,a,l){var i=(0,o.resolveComponent)("IconArrow"),u=(0,o.resolveComponent)("ToolbarButton");return l.hasTableRowData?((0,o.openBlock)(),(0,o.createBlock)(u,{key:0,class:"ml-2",onClick:l.toggleState},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(i,{type:"chevron-down",class:(0,o.normalizeClass)(["transition-transform duration-150",{"rotate-180":!a.collapsed}])},null,8,["class"])]})),_:1},8,["onClick"])):(0,o.createCommentVNode)("",!0)}]]);function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw a}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}Nova.booting((function(e){e.mixin({data:function(){return{container:null,toDestroy:[]}},unmounted:function(){var e,t=C(this.toDestroy);try{for(t.s();!(e=t.n()).done;){var n=e.value;(0,o.render)(null,n)}}catch(e){t.e(e)}finally{t.f()}},mounted:function(){var t,n=this;if(null!==(t=this._.type)&&void 0!==t&&null!==(t=t.__file)&&void 0!==t&&t.endsWith("ResourceTableRow.vue")){var r=document.createElement("div"),a=this.container=document.createElement("tr");a.classList.add("expandable-table-row"),r.classList.add("inline-flex","align-middle"),this.$watch("hasTableRowData",(function(){a.style.borderWidth=n.hasTableRowData?"0":null}),{immediate:!0});var l=this.resource.id.value,i=document.querySelector('table[data-testid="resource-table"] tr[dusk="'.concat(l,'-row"]')),u=document.querySelector('table[data-testid="resource-table"] tr[dusk="'.concat(l,'-row"] > td'));if(i){u.appendChild(r),i.insertAdjacentElement("afterend",a),i.classList.add("expandable-table-row");var s=(0,o.createVNode)(y,{row:this,hasTableRowData:this.hasTableRowData}),c=(0,o.createVNode)(x,{row:this,hasTableRowData:this.hasTableRowData});s.appContext=e._context,c.appContext=e._context,(0,o.render)(s,a),(0,o.render)(c,r),this.toDestroy.push(a,r)}}},computed:{hasTableRowData:function(){if(this.resource)return!!this.resource.fields.find((function(e){return void 0!==e.expandableRowData}))}}})}))},962:()=>{},744:(e,t)=>{t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[e,o]of t)n[e]=o;return n}}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,n,r,a)=>{if(!n){var l=1/0;for(c=0;c<e.length;c++){for(var[n,r,a]=e[c],i=!0,u=0;u<n.length;u++)(!1&a||l>=a)&&Object.keys(o.O).every((e=>o.O[e](n[u])))?n.splice(u--,1):(i=!1,a<l&&(l=a));if(i){e.splice(c--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={103:0,458:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[l,i,u]=n,s=0;if(l.some((t=>0!==e[t]))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(u)var c=u(o)}for(t&&t(n);s<l.length;s++)a=l[s],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(c)},n=self.webpackChunkdigital_creative_expandable_table_row=self.webpackChunkdigital_creative_expandable_table_row||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.O(void 0,[458],(()=>o(173)));var r=o.O(void 0,[458],(()=>o(962)));r=o.O(r)})();