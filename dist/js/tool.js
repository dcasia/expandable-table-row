(()=>{"use strict";var e,t={548:(e,t,a)=>{const o=Vue;const n="--vc-auto-duration",r=`height var(${n}) cubic-bezier(0.33, 1, 0.68, 1)`,l={padding:0},i={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function u(e){return{height:`${(null==e?void 0:e.scrollHeight)??0}px`}}function s(e){if(!e)return{};const{transition:t}=getComputedStyle(e);return"all 0s ease 0s"===t?{transition:r}:{transition:t}}function c(e){if(!e)return!0;const{transition:t}=getComputedStyle(e);return window.matchMedia("(prefers-reduced-motion: reduce)").matches||t.includes("none")||t.includes("height 0s")}(0,o.defineComponent)({inheritAttrs:!0});const d=(0,o.defineComponent)({__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(e,{emit:t}){const a=e,r=(0,o.toRef)(a,"when"),d=(0,o.toRef)(a,"baseHeight"),p=(0,o.computed)((()=>({overflow:"hidden",height:`${d.value}px`}))),v=(0,o.computed)((()=>({...l,...0===d.value?{display:"none"}:p.value}))),f=(0,o.ref)(null),h=(0,o.ref)(r.value?"expanded":"collapsed"),m=(0,o.shallowRef)({}),g=(0,o.ref)(300),b=(0,o.computed)((()=>({[n]:`${g.value}ms`})));function w(){m.value=l,h.value="expanded",t("expanded")}function y(){m.value=v.value,h.value="collapsed",t("collapsed")}function x(e){var t,a;e.target===f.value&&"height"===e.propertyName&&(r.value?(null==(t=f.value)?void 0:t.scrollHeight)===parseFloat(e.target.style.height)&&w():(null==(a=f.value)?void 0:a.style.height)===`${d.value}px`&&y())}return(0,o.onMounted)((()=>{if(!f.value)return;r.value||0!==d.value||(m.value=i);const e=function(e=0){if(0===e)return 0;const t=e/36,a=Math.round(10*(4+15*t**.25+t/5));return Number.isFinite(a)?a:0}(f.value.scrollHeight-d.value);g.value=e<=0?300:e,m.value=r.value?l:v.value})),(0,o.watch)(r,(e=>{if(e){if(c(f.value))return w();h.value="expanding",t("expand"),m.value={...l,...p.value,...b.value,willChange:"height"},requestAnimationFrame((()=>{m.value={...m.value,...u(f.value),...s(f.value)}}))}else{if(c(f.value))return y();h.value="collapsing",t("collapse"),m.value={...m.value,...b.value,...u(f.value),willChange:"height"},requestAnimationFrame((()=>{m.value={...m.value,...p.value,...s(f.value)}}))}})),(0,o.watch)(d,(e=>{r.value||(m.value={...m.value,...0===e?{display:"none"}:{transition:"none",height:`${e}px`}})})),(e,t)=>((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(a.as),{ref_key:"collapseRef",ref:f,style:(0,o.normalizeStyle)(m.value),onTransitionend:x,"data-collapse":h.value},{default:(0,o.withCtx)((()=>[(0,o.renderSlot)(e.$slots,"default",(0,o.normalizeProps)((0,o.guardReactiveProps)({state:h.value})))])),_:3},40,["style","data-collapse"]))}});const p={props:["collapsed"]};var v=a(744);const f={components:{Column:(0,v.Z)(p,[["render",function(e,t,a,n,r,l){return(0,o.openBlock)(),(0,o.createElementBlock)("td",{class:(0,o.normalizeClass)([{"dark:border-gray-700 dark:bg-gray-800":a.collapsed,"border-t border-gray-600 bg-gray-50 dark:bg-[rgba(var(--colors-gray-900),var(--tw-bg-opacity))]":!a.collapsed},"px-2 whitespace-nowrap group-hover:bg-gray-50 dark:group-hover:bg-gray-900 border-t-gray-200 dark:border-t-gray-700 transition-all duration-100 bg-opacity-30"])},[(0,o.renderSlot)(e.$slots,"default")],2)}]]),Collapse:d},props:["row"],data:function(){return{collapsed:!0}},created:function(){Nova.$on("collapse-toggle:".concat(this.row.resource.id.value),this.toggle)},unmounted:function(){Nova.$off("collapse-toggle:".concat(this.row.resource.id.value),this.toggle)},computed:{hasTableRowData:function(){return!!this.row.resource.fields.find((function(e){return void 0!==e.expandableRowData}))}},methods:{toggle:function(){this.collapsed=!this.collapsed}}},h=(0,v.Z)(f,[["render",function(e,t,a,n,r,l){var i=(0,o.resolveComponent)("Column"),u=(0,o.resolveComponent)("Collapse");return l.hasTableRowData?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createVNode)(i,{collapsed:r.collapsed},null,8,["collapsed"]),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.row.resource.fields,(function(e){var t=e.expandableRowData;return(0,o.openBlock)(),(0,o.createBlock)(i,{collapsed:r.collapsed},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(u,{when:!r.collapsed},{default:(0,o.withCtx)((function(){return[t?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)("index-"+t.component),{key:0,class:(0,o.normalizeClass)(["py-2","text-".concat(t.textAlign)]),field:t},null,8,["class","field"])):(0,o.createCommentVNode)("",!0)]})),_:2},1032,["when"])]})),_:2},1032,["collapsed"])})),256)),(0,o.createVNode)(i,{collapsed:r.collapsed},null,8,["collapsed"])],64)):(0,o.createCommentVNode)("",!0)}]]);const m={props:["row"],data:function(){return{collapsed:!0,Nova}},methods:{toggleState:function(){Nova.$emit("collapse-toggle:".concat(this.row.resource.id.value)),this.collapsed=!this.collapsed}},computed:{hasTableRowData:function(){return!!this.row.resource.fields.find((function(e){return void 0!==e.expandableRowData}))}}},g=(0,v.Z)(m,[["render",function(e,t,a,n,r,l){var i=(0,o.resolveComponent)("IconArrow"),u=(0,o.resolveComponent)("ToolbarButton");return l.hasTableRowData?((0,o.openBlock)(),(0,o.createBlock)(u,{key:0,class:"ml-2",onClick:l.toggleState},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(i,{type:"chevron-down",class:(0,o.normalizeClass)(["transition-transform duration-150",{"rotate-180":!r.collapsed}])},null,8,["class"])]})),_:1},8,["onClick"])):(0,o.createCommentVNode)("",!0)}]]);function b(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){i=!0,r=e},f:function(){try{l||null==a.return||a.return()}finally{if(i)throw r}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}Nova.booting((function(e){e.mixin({data:function(){return{container:null,toDestroy:[]}},unmounted:function(){var e,t=b(this.toDestroy);try{for(t.s();!(e=t.n()).done;){var a=e.value;(0,o.render)(null,a)}}catch(e){t.e(e)}finally{t.f()}},mounted:function(){var t,a=this;if(null!==(t=this._.type)&&void 0!==t&&null!==(t=t.__file)&&void 0!==t&&t.endsWith("ResourceTableRow.vue")){var n=document.createElement("div"),r=this.container=document.createElement("tr");r.classList.add("expandable-table-row"),n.classList.add("inline-flex","align-middle"),this.$watch("hasTableRowData",(function(){r.style.borderWidth=a.hasTableRowData?"0":null}),{immediate:!0});var l=this.resource.id.value,i=document.querySelector('table[data-testid="resource-table"] tr[dusk="'.concat(l,'-row"]')),u=document.querySelector('table[data-testid="resource-table"] tr[dusk="'.concat(l,'-row"] > td'));if(i){u.appendChild(n),i.insertAdjacentElement("afterend",r),i.classList.add("expandable-table-row");var s=(0,o.createVNode)(h,{row:this,hasTableRowData:this.hasTableRowData}),c=(0,o.createVNode)(g,{row:this,hasTableRowData:this.hasTableRowData});s.appContext=e._context,c.appContext=e._context,(0,o.render)(s,r),(0,o.render)(c,n),this.toDestroy.push(r,n)}}},computed:{hasTableRowData:function(){if(this.resource)return!!this.resource.fields.find((function(e){return void 0!==e.expandableRowData}))}}})}))},962:()=>{},744:(e,t)=>{t.Z=(e,t)=>{const a=e.__vccOpts||e;for(const[e,o]of t)a[e]=o;return a}}},a={};function o(e){var n=a[e];if(void 0!==n)return n.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,a,n,r)=>{if(!a){var l=1/0;for(c=0;c<e.length;c++){for(var[a,n,r]=e[c],i=!0,u=0;u<a.length;u++)(!1&r||l>=r)&&Object.keys(o.O).every((e=>o.O[e](a[u])))?a.splice(u--,1):(i=!1,r<l&&(l=r));if(i){e.splice(c--,1);var s=n();void 0!==s&&(t=s)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,n,r]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={103:0,458:0};o.O.j=t=>0===e[t];var t=(t,a)=>{var n,r,[l,i,u]=a,s=0;if(l.some((t=>0!==e[t]))){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(u)var c=u(o)}for(t&&t(a);s<l.length;s++)r=l[s],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(c)},a=self.webpackChunkdigital_creative_expandable_table_row=self.webpackChunkdigital_creative_expandable_table_row||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),o.O(void 0,[458],(()=>o(548)));var n=o.O(void 0,[458],(()=>o(962)));n=o.O(n)})();